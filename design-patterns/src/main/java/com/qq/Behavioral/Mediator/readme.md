# 中介模式

## 业务

用户之间相互聊天

## demo1

有一个用户类（People），用户之间可以互相沟通。

但沟通只只能在两人之间进行，而且各自都持有对方对象的引用，以便把消息传递给对方的监听方法。耦合性太强，你中有我，我中有你，谁也离不开谁。

如果想发起群聊，每个人都要持有其他所有人的引用了，且每当有人加入或离开，都要把每个人持有的其他人的引用关系更新一遍，发消息时更是繁琐不堪，重复工作显得非常多余。

## demo2

使用**中介者模式**，新建一个聊天室（ChatRoom）作为中介类。

用户类（User）不再持有其他所有用户的引用，取而代之的是聊天室的引用。将消息扔给聊天室处理，并且接受来自聊天室的信息，一切沟通都是在中介聊天室进行，这样用户之间就实现了解耦。
