# 桥接模式

## 业务

模拟第三方平台完成用户的支付，会出现多种**支付渠道**和**支付方式**的混合使用。

## demo1

只通过 ifelse 完对**支付渠道**和**支付方式**混合使用的判断，但随着后面接入了更多的支付服务或者支付方式，方法将变得很长且难以维护。

即使将支付渠道和支付方式抽象化，以继承的方式改造，实现类也会呈爆炸似的扩展。

## demo2

由于**支付渠道**和**支付方式**是不同类型的相互组合，可以使用**桥接模式**将其拆分，组合时只需要把模式传递给支付即可。

创建支付类型的桥接抽象类（Pay），定义了支付方式的需要实现的划账接口（transfer），以及桥接接口（IPayMode），并在构造函数中用户方自行选择支付方式。

创建支付模式接口（IPayMode），内部定义一个安全校验接口，不同支付模式有着不同程度的安全风控，由子类实现。

业务层（PayController）只需根据需求自由组合即可。